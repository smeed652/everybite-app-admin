generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_AUDIT")
}

model AuditLog {
  id           BigInt      @id @default(autoincrement())
  smartMenuId  BigInt
  actorId      BigInt
  action       String
  diff         Json
  createdAt    DateTime    @default(now()) @db.Timestamptz(6)

  @@index([smartMenuId, createdAt])
}

model ApiKey {
  id           BigInt      @id @default(autoincrement())
  userId       BigInt
  keyHash      String
  createdAt    DateTime    @default(now()) @db.Timestamptz(6)
  lastUsedAt   DateTime?   @db.Timestamptz(6)

  @@index([userId])
}
